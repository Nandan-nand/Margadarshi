<!-- index.html: A chatbot with a dynamic course recommendation system -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ICTAK Bot</title>
    <!-- Use the Inter font from Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <!-- Load Tailwind CSS from CDN for modern styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        /* Custom scrollbar for a cleaner look */
        .chat-container::-webkit-scrollbar {
            width: 8px;
        }
        .chat-container::-webkit-scrollbar-track {
            background: #e2e8f0;
            border-radius: 10px;
        }
        .chat-container::-webkit-scrollbar-thumb {
            background: #94a3b8;
            border-radius: 10px;
        }
        .message-container {
            display: flex;
            align-items: flex-start;
        }
        .message-container.user {
            justify-content: flex-end;
        }
        .message-container.bot {
            justify-content: flex-start;
        }
        .message-bubble {
            padding: 1rem;
            border-radius: 1rem;
            box-shadow: 0 1px 2px rgba(0,0,0,0.05);
            max-width: 85%;
            transition: opacity 0.5s ease-in-out;
            opacity: 0;
        }
        .message-bubble.user {
            background-color: #0084C0;
            color: white;
            border-bottom-right-radius: 0.25rem;
        }
        .message-bubble.bot {
            background-color: #83ccfd; /* Light blue from your request */
            color: #1e293b;
            border-bottom-left-radius: 0.25rem;
        }
        .button-container {
            display: flex;
            gap: 1rem;
            margin-top: 1rem;
            flex-wrap: wrap; /* Added to wrap buttons on smaller screens */
        }
        .option-button {
            padding: 0.75rem 1.5rem;
            background-color: #0084C0;
            color: white;
            border-radius: 9999px;
            font-weight: 600;
            transition: background-color 0.3s ease;
            cursor: pointer;
            border: none;
        }
        .option-button:hover {
            background-color: #0084C0;
        }
        .logo {
            height: 60px;
            margin-right: 1rem;
        }
    </style>
</head>
<body class="bg-slate-100 flex items-center justify-center min-h-screen p-4">

    <!-- Main Chat Container -->
    <div class="w-full max-w-2xl bg-white shadow-xl rounded-2xl flex flex-col h-[90vh]">

        <!-- Header -->
        <header class="bg-[#0084C0] text-white p-4 rounded-t-2xl shadow-md flex items-center justify-between">
            <div class="flex items-center">
                    <a href="https://ictkerala.org/en/" class="logo-link"><img src="C:\Users\HP\OneDrive\Desktop\ICTAK Internship\chatbot\Screenshot 2025-08-28 121101.png" alt="Company Logo" class="logo"></a>

                    <path d="M464 256A208 208 0 1 0 48 256a208 208 0 1 0 416 0zM0 256a256 256 0 1 1 512 0A256 256 0 1 1 0 256zm256 96a96 96 0 1 1 0-192 96 96 0 1 1 0 192zm0-256a160 160 0 1 0 0 320 160 160 0 1 0 0-320z"/>
                    <path d="M256 160a96 96 0 1 0 0 192 96 96 0 1 0 0-192zM192 256a64 64 0 1 1 128 0 64 64 0 1 1-128 0zm64-96a96 96 0 1 0 0 192 96 96 0 1 0 0-192zM480 256A224 224 0 1 1 32 256a224 224 0 1 1 448 0z"/>
                </svg>
                <h1 class="text-2xl font-bold">Margadarshi</h1>
            </div>
        </header>

        <!-- Status and loading section -->
        <div id="status-panel" class="p-4 bg-slate-100 text-center text-slate-600 transition-all duration-300">
            <span id="status-text">Preparing bot...</span>
            <div id="status-spinner" class="inline-block h-4 w-4 animate-spin rounded-full border-2 border-solid border-current border-r-transparent ml-2" role="status"></div>
        </div>

        <!-- Chat History Area -->
        <main id="chat-container" class="flex-1 overflow-y-auto p-6 space-y-4 chat-container">
            <!-- Initial bot message and profession buttons will be added here dynamically -->
        </main>

        <!-- Loading Indicator for chat responses -->
        <div id="loading-indicator" class="p-4 text-center text-slate-500 hidden">
            <div class="inline-block h-4 w-4 animate-spin rounded-full border-2 border-solid border-current border-r-transparent motion-reduce:animate-[spin_1.5s_linear_infinite]" role="status">
                <span class="!absolute !-m-px !h-px !w-px !overflow-hidden !whitespace-nowrap !border-0 !p-0 ![clip:rect(0,0,0,0)]">Loading...</span>
            </div>
            Thinking...
        </div>

        <!-- Input Form -->
        <form id="chat-form" class="p-4 border-t border-slate-200">
            <div class="flex items-center space-x-4">
                <input type="text" id="user-input" placeholder="Ask a question..." class="flex-1 p-3 border border-slate-300 rounded-full focus:outline-none focus:ring-2 focus:ring-indigo-500 transition-all">
                <button type="submit" id="send-button" class="p-3 bg-[#0084C0] text-white rounded-full hover:bg-[#0084C0] focus:outline-none focus:ring-2 focus:ring-indigo-500 transition-all disabled:opacity-50" disabled>
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <line x1="22" y1="2" x2="11" y2="13"></line>
                        <polygon points="22 2 15 22 11 13 2 9 22 2"></polygon>
                    </svg>
                </button>
            </div>
        </form>
    </div>

    <script>
        // Define a static array of course data for each category.
        const LEARNERS_COURSES = [
            {
                name: "Certified Specialist in Data Science & Analytics",
                code: "IRP001",
                type: "Learners",
                keywords: ["data", "science", "analytics", "data science", "datascience"],
                description: `The "Certified Specialist in Data Science & Analytics" is an Industry Readiness Program for graduates and professionals. It covers topics like Python, SQL, machine learning, deep learning, and big data. The program includes expert sessions, premium access to LinkedIn Learning, 100% placement assistance for eligible candidates, and scholarships. The curriculum is designed to make participants "industry-ready" for roles like Data Analyst and Data Scientist.`,
                youtube_summary: `This video provides a quick overview of the Data Science & Analytics course, highlighting key learning outcomes, career opportunities, and the hands-on project-based curriculum.`,
                links: {
                    flyer: "https://ictkerala.org/uploads/2025/04/2025-04_ROU-IRP001-Program-Flyer.pdf", 
                    youtube: "https://youtu.be/QnSUdQxpbLE?si=xXe_Hfe5BCxhyvdE",
                    redirect: "https://ictkerala.org/en/op/irp001/"
                }
            },
            {
                name: "Certified Specialist in Full Stack Development (MERN)",
                code: "IRP003",
                type: "Learners",
                keywords: ["full stack", "mern", "web development", "react", "nodejs"],
                description: `This program provides expertise in the MERN stack (MongoDB, Express.js, React, Node.js) for building dynamic web applications. Students gain hands-on experience in both front-end and back-end development.`,
                youtube_summary: `This video explains the MERN stack and its value for web developers, offering a glimpse into the course structure and the projects students will build.`,
                links: {
                    flyer: "https://ictkerala.org/uploads/2025/04/2025-04_ROU-IRP003-Program-Flyer.pdf",
                    youtube: "https://youtu.be/9zQhPnydr4Q",
                    redirect: "https://ictkerala.org/en/op/irp003/"
                }
            },
            {
                name: "Certified Specialist in Full Stack Development (Java)",
                code: "IRP004",
                type: "Learners",
                keywords: ["full stack", "java", "web development"],
                description: `This intensive program empowers learners to develop robust full-stack web applications using Java and popular frameworks like Spring Boot, ensuring a comprehensive understanding of modern web development practices.`,
                youtube_summary: `This video gives an overview of the Java Full Stack program, its curriculum, and the benefits of learning Spring Boot for modern web development.`,
                links: {
                    flyer: "https://ictkerala.org/uploads/2025/04/2025-04_ROU-IRP004-Program-Flyer.pdf",
                    youtube: "https://youtu.be/2hJH1ELHujo",
                    redirect: "https://ictkerala.org/en/op/irp004/"
                }
            },
            {
                name: "Certified Specialist in Artificial Intelligence & Machine Learning",
                code: "IRP005",
                type: "Learners",
                keywords: ["ai", "ml", "machine learning", "artificial intelligence", "data science"],
                description: `This program is an Industry Readiness Program designed to prepare students for the demands of the IT industry by mastering the fundamentals of AI and ML, from core concepts to advanced algorithms and practical applications.`,
                youtube_summary: `This video provides a program overview, covering the curriculum, hands-on labs, and the career paths available after completing the AI/ML specialization.`,
                links: {
                    flyer: "https://ictkerala.org/uploads/2025/04/2025-04_ROU-IRP005-Program-Flyer.pdf",
                    youtube: "https://youtu.be/qrOrAwUMmVk",
                    redirect: "https://ictkerala.org/en/op/irp005/"
                }
            },
            {
                name: "Certified Cyber Security Analyst",
                code: "IRP006",
                type: "Learners",
                keywords: ["cyber security", "security", "analyst", "hacking"],
                description: `An Industry Readiness Program that provides intensive training to protect digital systems and networks. It covers ethical hacking, network security, and incident response to equip learners with the latest skills.`,
                youtube_summary: `This video gives an introduction to cybersecurity as a career and outlines how this course prepares students with the practical skills needed to become a certified analyst.`,
                links: {
                    flyer: "https://ictkerala.org/uploads/2025/04/2025-04_ROU-IRP006-Program-Flyer.pdf",
                    youtube: "https://youtu.be/9Qv7hsAs4nk",
                    redirect: "https://ictkerala.org/en/op/irp006/"
                }
            },
            {
                name: "Certified Specialist in SDET",
                code: "IRP007",
                type: "Learners",
                keywords: ["sdet", "testing", "software engineering"],
                description: `This program is designed for aspiring Software Development Engineers in Test (SDETs). It covers automated testing, performance testing, and quality assurance principles to build robust software testing frameworks.`,
                youtube_summary: `This video provides a detailed look at the SDET program, covering its curriculum, career prospects, and the importance of automated testing in modern software development.`,
                links: {
                    flyer: "https://ictkerala.org/uploads/2025/04/2025-04_ROU-IRP007-Program-Flyer.pdf",
                    youtube: "https://youtu.be/2IvQEg9chSA",
                    redirect: "https://ictkerala.org/en/op/irp007/"
                }
            },
            {
                name: "Certified Metaverse Expert",
                code: "IRP008",
                type: "Learners",
                keywords: ["metaverse", "vr", "ar", "blockchain"],
                description: `This program provides comprehensive training in the technologies behind the metaverse, including virtual reality (VR), augmented reality (AR), blockchain, and 3D content creation.`,
                youtube_summary: `This video introduces the concept of the metaverse and explains how the course provides the skills needed for a career in this emerging field.`,
                links: {
                    flyer: "https://ictkerala.org/en/program-flyer/", // Placeholder
                    youtube: "https://www.youtube.com/watch?v=0h5o4y1vL7I", // Placeholder
                    redirect: "https://ictkerala.org/en/op/irp008/"
                }
            },
            {
                name: "Certified Specialist in 2D/3D Game Engineering",
                code: "IRP009",
                type: "Learners",
                keywords: ["game", "game development", "2d", "3d", "engineering"],
                description: `This program focuses on the technical skills for developing 2D and 3D games, covering game engine fundamentals, programming, and asset integration for various platforms.`,
                youtube_summary: `This video provides a high-level overview of the game engineering program, showcasing student projects and the career paths available in the gaming industry.`,
                links: {
                    flyer: "https://ictkerala.org/en/program-flyer/", // Placeholder
                    youtube: "https://www.youtube.com/watch?v=c2pY52p7T6o", // Placeholder
                    redirect: "https://ictkerala.org/en/op/irp009/"
                }
            },
            {
                name: "Certified Specialist in Full Stack Development (.NET)",
                code: "IRP010",
                type: "Learners",
                keywords: ["full stack", ".net", "web development", "c#"],
                description: `This program focuses on building full-stack applications using the .NET framework, covering C#, ASP.NET Core, and modern front-end technologies for enterprise-level web development.`,
                youtube_summary: `This video details the .NET Full Stack Development program, outlining the curriculum, hands-on projects, and the career benefits of mastering the .NET ecosystem.`,
                links: {
                    flyer: "https://ictkerala.org/en/program-flyer/",
                    youtube: "https://youtu.be/GgXDo_vDX1Y",
                    redirect: "https://ictkerala.org/en/op/irp010/"
                }
            },
            {
                name: "Mastering Digital Marketing with AI",
                code: "USP001",
                type: "Learners",
                keywords: ["digital marketing", "seo", "social media", "ai"],
                description: `This program equips participants with comprehensive knowledge and hands-on skills in modern online marketing, including SEO, social media, and data analytics, with a focus on AI integration.`,
                youtube_summary: `This video explains how AI is changing digital marketing and how the course helps professionals and students master these new tools for effective online campaigns.`,
                links: {
                    flyer: "https://ictkerala.org/en/program-flyer/",
                    youtube: "https://youtu.be/Ew7G1jJt89U", // Placeholder
                    redirect: "https://ictkerala.org/en/op/usp001/"
                }
            },
            {
                name: "Robotic Process Automation with UiPath",
                code: "USP002",
                type: "Learners",
                keywords: ["rpa", "robotic process automation", "uipath", "automation"],
                description: `This course provides hands-on training in Robotic Process Automation (RPA) using the UiPath platform, teaching students to design, develop, and deploy software robots for automating repetitive tasks.`,
                youtube_summary: `This video introduces the concept of RPA with UiPath and explains the career opportunities and skills gained from the training program.`,
                links: {
                    flyer: "https://ictkerala.org/en/program-flyer/",
                    youtube: "https://youtu.be/e7v6uB2h9fA", // Placeholder
                    redirect: "https://ictkerala.org/en/op/usp002/"
                }
            },
            {
                name: "DevOps with Azure",
                code: "USP003",
                type: "Learners",
                keywords: ["devops", "azure", "cloud", "docker", "kubernetes"],
                description: `This program provides hands-on skills in modern DevOps practices on the Azure cloud platform, covering CI/CD pipelines, containerization with Docker and Kubernetes, and infrastructure as code.`,
                youtube_summary: `This video gives an overview of the DevOps with Azure course, highlighting the key technologies and skills taught to prepare students for a career in cloud-native development.`,
                links: {
                    flyer: "https://ictkerala.org/uploads/2025/04/2025-04_ROU-USP003-Program-Flyer.pdf",
                    youtube: "https://youtu.be/j1Z2kC5n6f8", // Placeholder
                    redirect: "https://ictkerala.org/en/op/usp003/"
                }
            },
            {
                name: "Certified Flutter Developer",
                code: "USP004",
                type: "Learners",
                keywords: ["flutter", "mobile app", "mobile development", "android", "ios"],
                description: `This program teaches you to build high-performance, cross-platform mobile apps for iOS and Android using Google's Flutter framework.`,
                youtube_summary: `This video provides a summary of the Certified Flutter Developer course, explaining the benefits of Flutter and the projects students will create during the program.`,
                links: {
                    flyer: "https://ictkerala.org/uploads/2025/04/2025-04_ROU-USP004-Program-Flyer.pdf",
                    youtube: "https://youtu.be/iK9Xn2b3o7w", // Placeholder
                    redirect: "https://ictkerala.org/en/op/usp004/"
                }
            },
            {
                name: "UI/UX Design in Figma",
                code: "USP005",
                type: "Learners",
                keywords: ["ui", "ux", "design", "figma"],
                description: `This program focuses on mastering UI/UX design principles and tools, with a special emphasis on Figma, to create intuitive, user-friendly digital products.`,
                youtube_summary: `This video provides an overview of the UI/UX Design course, detailing the curriculum, design methodologies, and career opportunities for aspiring designers.`,
                links: {
                    flyer: "https://ictkerala.org/uploads/2025/04/2025-04_ROU-USP005-Program-Flyer.pdf",
                    youtube: "https://m.youtube.com/shorts/hy4d_7xHHWs",
                    redirect: "https://ictkerala.org/en/op/usp005/"
                }
            },
            {
                name: "AWS Certified Developer",
                code: "USP006",
                type: "Learners",
                keywords: ["aws", "cloud", "developer"],
                description: `This program prepares you for the AWS Certified Developer – Associate certification exam, focusing on the key services and tools used by developers to build, deploy, and debug applications on the AWS platform.`,
                youtube_summary: `This video offers in-depth training on the AWS Certified Developer Associate certification, covering the exam's key services and tools used by developers.`,
                links: {
                    flyer: "https://ictkerala.org/en/program-flyer/", // Placeholder
                    youtube: "https://www.youtube.com/watch?v=ttyh6kPdaK8",
                    redirect: "https://ictkerala.org/en/op/usp006/"
                }
            },
            {
                name: "Python Programming",
                code: "ESP001",
                type: "Learners",
                keywords: ["python", "programming", "coding"],
                description: `This foundational course teaches the basics of Python programming, from syntax and data structures to object-oriented concepts, and is designed to boost expertise in the ICT sector.`,
                youtube_summary: `This video gives a quick introduction to Python programming, showcasing its versatility and explaining how the course provides a strong foundation for future learning.`,
                links: {
                    flyer: "https://ictkerala.org/en/program-flyer/", // Placeholder
                    youtube: "https://www.youtube.com/watch?v=kYc5eM1R0-o", // Placeholder
                    redirect: "https://ictkerala.org/en/op/esp001/"
                }
            },
            {
                name: "Java Programming",
                code: "ESP002",
                type: "Learners",
                keywords: ["java", "programming", "coding"],
                description: `This course provides a solid foundation in Java programming, covering core concepts like object-oriented programming, data types, and control structures, preparing students for advanced Java-based development.`,
                youtube_summary: `This video provides an overview of the Java Programming course, explaining its foundational concepts and the importance of Java in the software industry.`,
                links: {
                    flyer: "https://ictkerala.org/en/program-flyer/",
                    youtube: "https://www.youtube.com/watch?v=y8Yd2p1B5-M", // Placeholder
                    redirect: "https://ictkerala.org/en/op/esp002/"
                }
            },
            {
                name: "Business Intelligence with Excel & Tableau",
                code: "ESP003",
                type: "Learners",
                keywords: ["business intelligence", "excel", "tableau", "data analysis"],
                description: `This course teaches you to use Excel and Tableau for business intelligence, covering data analysis, visualization, and dashboard creation to help make data-driven decisions.`,
                youtube_summary: `This video introduces the Business Intelligence with Excel & Tableau course, highlighting how it prepares students to create impactful data visualizations and reports.`,
                links: {
                    flyer: "https://ictkerala.org/en/program-flyer/", // Placeholder
                    youtube: "https://www.youtube.com/watch?v=i1xP9G12j9c", // Placeholder
                    redirect: "https://ictkerala.org/en/op/esp003/"
                }
            },
            {
                name: "Business Intelligence with Power BI",
                code: "ESP004",
                type: "Learners",
                keywords: ["business intelligence", "power bi", "data modeling", "visualization"],
                description: `This program focuses on using Microsoft Power BI for business intelligence, covering data modeling, visualization, and report generation to transform raw data into valuable business insights.`,
                youtube_summary: `This video provides an overview of the Business Intelligence with Power BI program, explaining its core components and the skills gained to build interactive dashboards.`,
                links: {
                    flyer: "https://ictkerala.org/en/program-flyer/",
                    youtube: "https://www.youtube.com/watch?v=3g8K91hS3J4", // Placeholder
                    redirect: "https://ictkerala.org/en/op/esp004/"
                }
            },
            {
                name: "Front-end Application Development with Angular",
                code: "ESP005",
                type: "Learners",
                keywords: ["front-end", "web development", "angular"],
                description: `This course is designed to teach modern front-end development using the Angular framework, enabling students to build dynamic and responsive single-page applications.`,
                youtube_summary: `This video provides an introduction to Angular and the course curriculum, highlighting how to build scalable and maintainable front-end applications.`,
                links: {
                    flyer: "https://ictkerala.org/en/program-flyer/", // Placeholder
                    youtube: "https://www.youtube.com/watch?v=cK2V3_yRz_0", // Placeholder
                    redirect: "https://ictkerala.org/en/op/esp005/"
                }
            },
            {
                name: "Data Analytics with Excel",
                code: "ESP006",
                type: "Learners",
                keywords: ["data", "analytics", "excel", "data analysis"],
                description: `This course focuses on mastering data analysis using Microsoft Excel, covering advanced formulas, pivot tables, and data visualization techniques to help you analyze and interpret large datasets.`,
                youtube_summary: `This video gives a quick summary of the Data Analytics with Excel course, explaining how to leverage Excel for powerful data analysis and reporting.`,
                links: {
                    flyer: "https://ictkerala.org/en/program-flyer/", // Placeholder
                    brochure: "https://ictkerala.org/en/e-brochure/", // Placeholder
                    youtube: "https://www.youtube.com/watch?v=37-c8T9L_jE", // Placeholder
                    redirect: "https://ictkerala.org/en/op/esp006/"
                }
            },
            {
                name: "C# Programming",
                code: "ESP007",
                type: "Learners",
                keywords: ["c#", "programming", "coding", ".net"],
                description: `This course introduces C# programming, a powerful language for building Windows applications, web services, and games. It covers fundamental concepts, object-oriented principles, and the .NET framework.`,
                youtube_summary: `This video provides a summary of the C# programming course, highlighting its key features and applications in software development.`,
                links: {
                    flyer: "https://ictkerala.org/en/program-flyer/", // Placeholder
                    brochure: "https://ictkerala.org/en/e-brochure/", // Placeholder
                    youtube: "https://www.youtube.com/watch?v=gT0a9D1Rz7E", // Placeholder
                    redirect: "https://ictkerala.org/en/op/esp007/"
                }
            },
            {
                name: "Mastering Google Productivity with AI",
                code: "NSP001",
                type: "Learners",
                keywords: ["google", "productivity", "ai", "google workspace"],
                description: `This nanoskill program is designed to enhance productivity using Google tools with integrated AI features, covering advanced tips for Google Workspace.`,
                youtube_summary: `This video provides a brief overview of the Mastering Google Productivity with AI program, showcasing how to leverage AI tools to boost efficiency in a Google Workspace environment.`,
                links: {
                    flyer: "https://ictkerala.org/en/program-flyer/", // Placeholder
                    brochure: "https://ictkerala.org/en/e-brochure/", // Placeholder
                    youtube: "https://www.youtube.com/watch?v=Cq2d8rA_h1o", // Placeholder
                    redirect: "https://ictkerala.org/en/op/nsp001/"
                }
            },
            {
                name: "Prompt Engineering",
                code: "NSP002",
                type: "Learners",
                keywords: ["prompt engineering", "ai", "large language models"],
                description: `This nanoskill program focuses on the art and science of "prompt engineering," teaching you how to craft effective prompts to get the best results from large language models and other AI tools.`,
                youtube_summary: `This video introduces the concept of Prompt Engineering and explains its importance for working with modern AI, giving tips on how to create better prompts.`,
                links: {
                    flyer: "https://ictkerala.org/en/program-flyer/", // Placeholder
                    brochure: "https://ictkerala.org/en/e-brochure/", // Placeholder
                    youtube: "https://www.youtube.com/watch?v=o2dD3w0a96A", // Placeholder
                    redirect: "https://ictkerala.org/en/op/nsp002/"
                }
            },
            {
                name: "Industry-ready Accountants Program",
                code: "ANNPPR01",
                type: "Learners",
                keywords: ["accounting", "finance", "accountant", "industry-ready"],
                description: `The Industry-ready Accountants Program is a partner program designed to provide students with the practical skills needed for a career in accounting, combining theoretical knowledge with hands-on training on real projects.`,
                youtube_summary: `This video discusses the importance of a professional and practical approach to accounting and how this program prepares students to meet industry standards.`,
                links: {
                    flyer: "https://ictkerala.org/en/program-flyer/",
                    youtube: "https://www.youtube.com/watch?v=Evj6pSK21sw",
                    redirect: "https://ictkerala.org/en/op/annppr01/"
                }
            },
            {
                name: "Certificate Program in FPGA Design using HDL",
                code: "CDAPPR01",
                type: "Learners",
                keywords: ["fpga", "hdl", "digital design", "vhdl"],
                description: `This partner program provides an in-depth course on FPGA Design using VHDL, covering the essentials of digital design, VHDL programming, and FPGA implementation. The course is ideal for beginners and includes practical, hands-on examples.`,
                youtube_summary: `This video provides an in-depth course overview on FPGA Design with VHDL, showcasing what you will learn and the practical projects you will build.`,
                links: {
                    flyer: "https://ictkerala.org/en/program-flyer/",
                    brochure: "https://ictkerala.org/en/e-brochure/",
                    youtube: "https://www.youtube.com/watch?v=lKPjGGa3Tpo",
                    redirect: "https://ictkerala.org/en/op/cdappr01/"
                }
            },
            {
                name: "Certified Specialist in Health Information Technology",
                code: "MCCPPR01",
                type: "Learners",
                keywords: ["health", "technology", "health information", "biomedical"],
                description: `This specialized program is designed to bridge the gap between technology and healthcare, focusing on hospital management foundations, medical informatics, and hospital information systems.`,
                youtube_summary: `This video discusses the role of a Health Informatics Specialist and the skills required for a career in healthcare IT, giving an introduction to the program's focus.`,
                links: {
                    flyer: "https://ictkerala.org/uploads/2025/04/2025-04_ROU-MCCPPR01-Program-Flyer.pdf",
                    youtube: "https://www.youtube.com/watch?v=4FmHIXCQj_s",
                    redirect: "https://ictkerala.org/en/op/mccppr01/"
                }
            },
            {
                name: "BIMLABS Certified BIM Modeller Program",
                code: "BIMPPR01",
                type: "Learners",
                keywords: ["bim", "modeller", "building information modeling"],
                description: `The BIMLABS Certified BIM Modeller Program is a partner program focused on Building Information Modeling (BIM), providing government and industry-backed training on industry-standard tools and real-time projects.`,
                youtube_summary: `This video explains why BIMLABS is a leading BIM training institute, highlighting its government and industry-backed training, Autodesk partnership, and placement assistance.`,
                links: {
                    flyer: "https://ictkerala.org/uploads/2025/04/2025-04_ROU-BIMPPR01-Program-Flyer.pdf",
                    youtube: "https://www.youtube.com/shorts/beLh5F12drQ",
                    redirect: "https://ictkerala.org/en/op/bimppr01/"
                }
            }
        ];
        
        const ACADEMIA_COURSES = [];
        const CORPORATE_COURSES = [
            {
                name: "Advanced AI & MLOps",
                code: "AAI-ML01",
                type: "Corporate Professional",
                keywords: ["ai", "mlops", "corporate", "professional"],
                description: `The five-day course provides a comprehensive overview of modern AI. It starts with the foundations of machine learning, progresses through deep learning and neural networks, then moves into MLOps and cloud-based workflows. The final day covers advanced topics like Large Language Models (LLMs), Generative AI, and Computer Vision.`,
                links: {
                    redirect: "https://ictkerala.org/en/corporates/"
                }
            },
            {
                name: "Productivity Tools",
                code: "PT001",
                type: "Corporate Professional",
                keywords: ["productivity", "tools", "corporate", "professional"],
                description: `This program focuses on enhancing productivity with modern tools and software. It covers advanced features of collaboration platforms, project management tools, and automation techniques to streamline workflows.`,
                links: {
                    redirect: "https://ictkerala.org/en/corporates/"
                }
            },
            {
                name: "Design Thinking for Project Managers",
                code: "DT-PM01",
                type: "Corporate Professional",
                keywords: ["design thinking", "project management"],
                description: `This course teaches project managers how to apply design thinking principles to innovation and problem-solving. It covers the core phases of design thinking: empathize, define, ideate, prototype, and test.`,
                links: {
                    redirect: "https://ictkerala.org/en/corporates/"
                }
            },
            {
                name: "Power BI",
                code: "PB-01",
                type: "Corporate Professional",
                keywords: ["power bi", "business intelligence"],
                description: `This program focuses on using Microsoft Power BI for business intelligence, covering data modeling, visualization, and report generation to transform raw data into valuable business insights.`,
                links: {
                    redirect: "https://ictkerala.org/en/corporates/"
                }
            },
            {
                name: "React + Next.js",
                code: "RNJ-01",
                type: "Corporate Professional",
                keywords: ["react", "nextjs", "web development"],
                description: `The React + Next.js module builds strong foundations in modern front-end development using ES6, React, and Next.js. Learners explore React essentials such as components, state management, hooks, rendering techniques, and Redux for application-level data handling. The course further covers Next.js fundamentals, API routes, middleware, and TypeScript integration to develop scalable, production-ready applications. With a focus on deployment, testing, and a capstone project, the module ensures hands-on experience in building modern, efficient, and maintainable web applications.`,
                links: {
                    redirect: "https://ictkerala.org/en/corporates/"
                }
            }
        ];
        
        const GOVERNMENT_COURSES = [];

        // ICTAK website content to be used as a primary knowledge base.
        const WEBSITE_CONTENT = `
        Information and Communication Technology Academy of Kerala (ICTAK) is an organisation established by Government of Kerala to enhance the quality of graduates in the information technology sector and to generate resources for increasing the employability of students. It is a social enterprise established through a public-private partnership (PPP) model. The mission is to impart ICT skills to the youth of Kerala, enhancing their employability in the industry.
        
        Head Quarters: G1, Ground Floor, Thejaswini, Technopark Campus, Thiruvananthapuram, Kerala, India – 695 581.
        Regional Centre (Central): B-Wing, Kanikonna Villa, Infopark Campus, Koratty, Thrissur, Kerala, India – 680 308.
        Regional Centre (North): 2nd Floor, UL Cyberpark Building, Nellikode Post, Kozhikode.
        Phone: +91 471 270 0811.
        
        The ICT Academy of Kerala offers hands-on training sessions aimed at bridging the skill gap in the information and communication technology (ICT) domain. These programs include:
        - **Industry Readiness Programs:** Designed to equip you with the latest skills and knowledge in the ICT sector.
        - **Upskilling Programs:** Tailored to meet the demands of the ICT sector, ensuring you stay competitive.
        - **Essential Skill Programs:** To boost your expertise in the ICT sector.
        - **Nanoskill Programs:** Providing focused, online training for targeted skills.
        - **Partner Programs:** In collaboration with industry leaders to provide cutting-edge training.
        - **ASPIRE-Unnathi Programs.**
        
        Current Offerings include: Certified Specialist in Data Science & Analytics, BIMLABS Certified BIM Modeller Program, Java Programming, Certified Flutter Developer, DevOps with Azure, Mastering Digital Marketing with AI, Certified Specialist in Health Information Technology, Business Intelligence with Power BI, Python Programming, Certified Specialist in SDET, Certified Cyber Security Analyst, and Certified Specialist in Full Stack Development (MERN).
        
        Scholarship Terms:
        - The scholarship is subject to terms and conditions.
        - A scholarship of 40% is available for candidates who score above 60% on the admission test.
        - A Special Offer of 15% cashback is available after successful program completion.
        - An 'Early Bird Concession' of 5,000 INR can be availed during the second installment.
        - The registration fee (INR 250 + 18% GST) is non-refundable.
        - Refund requests must be made five days before the commencement of the class/batch.
        - A minimum of 80% attendance is required for scholarship recipients.
        
        General Information:
        - ICTAK has trained over 18,000 participants and 5,000 faculty.
        - It has partnered with over 2,000 institutions.
        - It provides 100% placement assistance for eligible candidates.
        - The aptitude test for programs covers Numerical Ability, Logical Reasoning, Verbal Ability, and Data Manipulation.
        - ICTAK offers training in physical, online, and hybrid modes.
The ICT Academy of Kerala (ICTAK) is a government-supported, not-for-profit social enterprise established to bridge the digital skill gap and improve youth employability. 
Created through a collaboration between the Government of Kerala, the Government of India, and the IT industry, ICTAK plays a pivotal role in connecting academia with evolving industry needs.

ICTAK provides a wide spectrum of academic training programs, internships, and professional certifications across technology domains such as Data Science, Artificial Intelligence, Cyber Security, Cloud Computing, Full Stack Development, Internet of Things (IoT), AR/VR, UI/UX, Digital Marketing, and Business Analytics. 
These programs are designed not only to build technical expertise but also to foster innovation, problem-solving, and industry readiness.

Through initiatives like the Centre for Skill Development and Career Planning (CSDC & CP), ICTAK has established training hubs across Kerala, offering job-oriented programs in collaboration with more than 400 academic institutions. 
It also conducts Certified Specialist Pathway Programs, Add-on Creditised Programs, and Upskilling Programs, ensuring learners remain future-ready with credit-aligned, career-focused certifications.

Internship opportunities offered by ICTAK include one-month immersive programs and long-term one-year internships for postgraduate students. 
These combine training, mentorship, project experience, and certifications, bridging the gap between academics and industry expectations.

Faculty Development Programs (FDPs) are conducted to update educators with the latest teaching methodologies, pedagogy, and technological trends, while Student Development Programs (SDPs) provide short-term, hands-on training in areas such as AI, Cyber Security, IoT, VLSI, Drone Technology, and more. 
Joint Certification Programs with global leaders like Google, Microsoft, AWS, CDAC, and NIELIT further enhance employability by providing globally recognized skills and exposure to industry-standard tools.

ICTAK also runs employability-focused initiatives like the Bhavishya Program, which prepares students for placements through soft skills training, resume building, interview preparation, and industry visits. 
Additional offerings include online assessments with AI-enabled proctoring, expert sessions, hackathons, industry conclaves, and workshops on cutting-edge topics.

With collaborations spanning hundreds of institutions, corporates, and government departments, ICTAK has trained nearly two lakh participants and impacted thousands of students and faculty across Kerala. 
Recognized nationally for its innovative practices, ICTAK continues to serve as a comprehensive solution provider, driving innovation, academic excellence, and workforce readiness in the digital era.
        `;

        let chatHistory = [];
        let userProfession = null;

        // Get references to DOM elements
        const chatForm = document.getElementById('chat-form');
        const userInput = document.getElementById('user-input');
        const chatContainer = document.getElementById('chat-container');
        const loadingIndicator = document.getElementById('loading-indicator');
        const statusPanel = document.getElementById('status-panel');
        const statusText = document.getElementById('status-text');
        const statusSpinner = document.getElementById('status-spinner');
        const sendButton = document.getElementById('send-button');

        let knowledgeBase = '';

        // Function to create and append a new message to the chat
        function addMessage(text, isUser) {
            const messageElement = document.createElement('div');
            messageElement.classList.add('message-container');
            if (isUser) {
                messageElement.classList.add('user');
            } else {
                messageElement.classList.add('bot');
            }
            
            const textContainer = document.createElement('div');
            textContainer.classList.add('message-bubble');
            
            textContainer.innerHTML = text;
            messageElement.appendChild(textContainer);
            chatContainer.appendChild(messageElement);

            setTimeout(() => {
                textContainer.style.opacity = 1;
            }, 10);
            
            chatContainer.scrollTop = chatContainer.scrollHeight;
        }

        // Add the buttons for user profession
        function addProfessionButtons() {
            const buttonContainer = document.createElement('div');
            buttonContainer.classList.add('button-container');

            const academiaBtn = document.createElement('button');
            academiaBtn.classList.add('option-button');
            academiaBtn.textContent = 'Academia';
            academiaBtn.onclick = () => handleProfessionSelection('Academia');
            
            const corporateBtn = document.createElement('button');
            corporateBtn.classList.add('option-button');
            corporateBtn.textContent = 'Corporate Professional';
            corporateBtn.onclick = () => handleProfessionSelection('Corporate Professional');

            const governmentBtn = document.createElement('button');
            governmentBtn.classList.add('option-button');
            governmentBtn.textContent = 'Government';
            governmentBtn.onclick = () => handleProfessionSelection('Government');

            const learnersBtn = document.createElement('button');
            learnersBtn.classList.add('option-button');
            learnersBtn.textContent = 'Learners';
            learnersBtn.onclick = () => handleProfessionSelection('Learners');

            buttonContainer.appendChild(academiaBtn);
            buttonContainer.appendChild(corporateBtn);
            buttonContainer.appendChild(governmentBtn);
            buttonContainer.appendChild(learnersBtn);
            
            const messageElement = document.createElement('div');
            messageElement.classList.add('message-container', 'bot');
            messageElement.appendChild(buttonContainer);
            chatContainer.appendChild(messageElement);
        }
        
        function handleProfessionSelection(profession) {
            addMessage(`I am a ${profession}.`, true);
            userProfession = profession;

            let courseList = [];
            if (userProfession === 'Academia' || userProfession === 'Learners') {
                 courseList = LEARNERS_COURSES;
            } else if (userProfession === 'Corporate Professional' || userProfession === 'Government') {
                 courseList = CORPORATE_COURSES;
            }

            if (courseList.length > 0) {
                 const courseNames = courseList.map(course => `<li><a href="${course.links.redirect}" target="_blank" class="text-indigo-400 underline hover:text-indigo-300">${course.name}</a></li>`).join('');
                const courseListMessage = `Great! Here is a list of our available courses for your profession:<br><ul>${courseNames}</ul><br>Is there anything else I can help you with?`;
                addMessage(courseListMessage, false);
            } else {
                 addMessage(`Sorry, I couldn't find suitable recommendations for you right now. There is no specific course data available for the '${profession}' category at the moment. Do you have any other questions?`, false);
            }
        }
        
        // Initialize the bot's knowledge base and start the interactive session
        async function initializeBot() {
            userInput.disabled = true;
            sendButton.disabled = true;
            statusText.textContent = "Loading knowledge base...";
            statusSpinner.classList.remove('hidden');

            const allCourses = [...LEARNERS_COURSES, ...ACADEMIA_COURSES, ...CORPORATE_COURSES, ...GOVERNMENT_COURSES];
            const staticDataString = allCourses.map(course => {
                const linksList = Object.entries(course.links)
                    .filter(([key, value]) => value) // Filter out null/empty links
                    .map(([key, value]) => `  - **${key.charAt(0).toUpperCase() + key.slice(1)}**: <a href="${value}" target="_blank">${value}</a>`)
                    .join('\n');

                return `
**Course:** ${course.name}
**Code:** ${course.code}
**Type:** ${course.type}
**Description:** ${course.description}
**YouTube Summary:** ${course.youtube_summary}
**Links:**
${linksList}
                `;
            }).join('\n');

            knowledgeBase = `
            ICTAK INSTITUTIONAL KNOWLEDGE
            
            Website Content:
            ${WEBSITE_CONTENT}
            
            Static Course Data:
            ${staticDataString}
            `;

            statusText.textContent = "Ready to chat!";
            statusSpinner.classList.add('hidden');
            userInput.disabled = false;
            sendButton.disabled = false;

            const initialMessage = `I am Margadarshi – your guide to knowledge and opportunities at ICT Academy of Kerala. Welcome to the world of learning. Please select your profession   to get started:`;
            
            addMessage(initialMessage, false);
            addProfessionButtons();
        }

        // Handle form submission
        chatForm.addEventListener('submit', async (e) => {
            e.preventDefault();
            
            const prompt = userInput.value.trim();
            if (prompt === '') {
                return;
            }

            addMessage(prompt, true);
            userInput.value = '';

            const lowerPrompt = prompt.toLowerCase();
            let courseDetails = null;
            const isMoreDetailsQuery = lowerPrompt.includes('more details') || lowerPrompt.includes('details') || lowerPrompt.includes('description');
            const isRecommendationQuery = lowerPrompt.includes('recommend') || lowerPrompt.includes('suggest');
            const isListQuery = lowerPrompt.includes('list all courses') || lowerPrompt.includes('all courses') || lowerPrompt.includes('all programs');
            
            let currentCourses = [];
            if(userProfession === 'Academia' || userProfession === 'Learners') {
                currentCourses = LEARNERS_COURSES;
            } else if (userProfession === 'Corporate Professional') {
                currentCourses = CORPORATE_COURSES;
            } else if (userProfession === 'Government') {
                currentCourses = GOVERNMENT_COURSES;
            }
            
            for (const course of currentCourses) {
                if (lowerPrompt.includes(course.name.toLowerCase()) || lowerPrompt.includes(course.code.toLowerCase())) {
                    courseDetails = course;
                    break;
                }
            }

            if (isRecommendationQuery) {
                let recommendations = [];
                if (userProfession === 'Academia' || userProfession === 'Learners') {
                     const keywords = ['data', 'science', 'analytics', 'web development', 'full stack', 'cyber security', 'ai', 'ml', 'machine learning', 'devops'];
                     const courseKeywords = LEARNERS_COURSES.map(c => ({...c, score: c.keywords.filter(k => lowerPrompt.includes(k)).length}));
                     recommendations = courseKeywords.sort((a, b) => b.score - a.score).slice(0, 3);
                } else if (userProfession === 'Corporate Professional') {
                    const keywords = ['ai', 'mlops', 'productivity', 'tools', 'design thinking', 'project management', 'power bi', 'web development', 'react', 'nextjs'];
                    const courseKeywords = CORPORATE_COURSES.map(c => ({...c, score: c.keywords.filter(k => lowerPrompt.includes(k)).length}));
                    recommendations = courseKeywords.sort((a, b) => b.score - a.score).slice(0, 3);
                } else if (userProfession === 'Government') {
                    const keywords = ['e-governance', 'digital', 'data analytics', 'public sector', 'government', 'solutions'];
                    const courseKeywords = GOVERNMENT_COURSES.map(c => ({...c, score: c.keywords.filter(k => lowerPrompt.includes(k)).length}));
                    recommendations = courseKeywords.sort((a, b) => b.score - a.score).slice(0, 3);
                } else {
                     addMessage(`Please tell me your profession (e.g., Academia, Corporate Professional, Government, Learners) so I can recommend suitable courses.`, false);
                     return;
                }

                if (recommendations.length > 0) {
                     const recommendationMessage = `Based on your query, here are some suitable courses:<br><ul>${recommendations.map(course => `<li><a href="${course.links.redirect}" target="_blank" class="text-indigo-400 underline hover:text-indigo-300">${course.name}</a></li>`).join('')}</ul><br>Do you have any other questions?`;
                     addMessage(recommendationMessage, false);
                } else {
                     addMessage(`Sorry, I couldn't find suitable recommendations for you right now. Is there anything else I can help with?`, false);
                }
                return;
            } else if (isListQuery) {
                 const courseNames = currentCourses.map(course => `<li><a href="${course.links.redirect}" target="_blank" class="text-indigo-400 underline hover:text-indigo-300">${course.name}</a></li>`).join('');
                const courseListMessage = `Here is a list of all our available courses for your profession:<br><ul>${courseNames}</ul><br>Is there anything else I can help you with?`;
                addMessage(courseListMessage, false);
                return;
            }

            if (courseDetails && isMoreDetailsQuery) {
                const linksList = Object.entries(courseDetails.links)
                    .filter(([key, value]) => value)
                    .map(([key, value]) => `  - <strong>${key.charAt(0).toUpperCase() + key.slice(1)}</strong>: <a href="${value}" target="_blank" class="text-indigo-400 underline hover:text-indigo-300">${value}</a>`)
                    .join('<br>');
                
                const detailedResponse = `
                    Here are the details for **${courseDetails.name}** (Course Code: ${courseDetails.code}):<br><br>
                    ${courseDetails.description}<br><br>
                    <strong>Links:</strong><br>
                    ${linksList}<br><br>
                    Do you have any other questions?
                `;
                addMessage(detailedResponse, false);
                return;
            } else if (courseDetails) {
                 const courseResponse = `For more information about ${courseDetails.name}, please visit its official page: <a href="${courseDetails.links.redirect}" target="_blank" class="text-indigo-400 underline hover:text-indigo-300">${courseDetails.links.redirect}</a>. Can I help you with anything else?`;
                addMessage(courseResponse, false);
                return;
            }
            
            loadingIndicator.classList.remove('hidden');

            try {
                const fullPrompt = `You are a helpful chatbot for a training institution named ICTAK. Your goal is to provide a concise and professional answer to general questions about the institution. Your response should be **one or two sentences long**.

                Context:
                ${knowledgeBase}

                User's Question:
                ${prompt}`;

                const payload = { contents: [{ role: "user", parts: [{ text: fullPrompt }] }] };
                
                const apiKey = "AIzaSyBKszyJj8pWCO0IgO5aDNb6W24PgXfCYEg";
                const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=${apiKey}`;

                let response;
                let retryCount = 0;
                const maxRetries = 5;
                const baseDelay = 1000;

                while (retryCount < maxRetries) {
                    try {
                        response = await fetch(apiUrl, {
                            method: 'POST',
                            headers: { 'Content-Type': 'application/json' },
                            body: JSON.stringify(payload)
                        });

                        if (response.status === 429) {
                            const delay = baseDelay * Math.pow(2, retryCount);
                            await new Promise(resolve => setTimeout(resolve, delay));
                            retryCount++;
                            continue;
                        } else if (!response.ok) {
                            throw new Error(`API call failed with status: ${response.status}`);
                        }

                        const result = await response.json();
                        const botResponse = result.candidates[0].content.parts[0].text;
                        addMessage(botResponse + `<br><br>Do you have any other questions?`, false);
                        break;

                    } catch (error) {
                        console.error('Fetch error:', error);
                        if (retryCount >= maxRetries - 1) {
                            addMessage("Sorry, I'm having trouble connecting right now. Please try again later.", false);
                        }
                        retryCount++;
                    }
                }
            } finally {
                loadingIndicator.classList.add('hidden');
            }
        });

        // Start the application
        window.onload = initializeBot;
    </script>
</body>
</html>
